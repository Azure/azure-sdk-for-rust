name: publish all service crates

on:
  workflow_dispatch:

jobs:

  azure_mgmt_vmware:
    if: always()
    uses: ./.github/workflows/publish.yml
    with:
      directory: services
      package: azure_mgmt_vmware
    secrets:
      CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}

  azure_mgmt_compute:
    if: always()
    uses: ./.github/workflows/publish.yml
    with:
      directory: services
      package: azure_mgmt_compute
    secrets:
      CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}
