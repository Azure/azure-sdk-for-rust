parameters:
  - name: Toolchain
    type: string
    default: stable
  - name: MaxAttempts
    type: number
    default: 3
  - name: WorkingDirectory
    type: string
    default: $(System.DefaultWorkingDirectory)

steps:
- task: PowerShell@2
  displayName: "Use Rust ${{ parameters.Toolchain }}"
  inputs:
    pwsh: true
    filePath: $(System.DefaultWorkingDirectory)/eng/scripts/Use-Rust.ps1
    arguments: >
      -Toolchain ${{ parameters.Toolchain }}
      -MaxAttempts ${{ parameters.MaxAttempts }}
    workingDirectory: ${{ parameters.WorkingDirectory }}
